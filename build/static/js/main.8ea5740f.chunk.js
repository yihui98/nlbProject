(this.webpackJsonpnlb=this.webpackJsonpnlb||[]).push([[0],{183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),s=a(7),o=a(246),l=a(9),u=a.n(l),j=a(14),d=a(19),b=a(16),h=a(224),O=a(262),p=a(56),x=a.n(p),m=a(29),f=a(248),g=a(260),v=a(258),y=a(63),w=a(35),k=a.n(w),C="/api/books",S={searchBook:function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat(C,"/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),searchTitle:function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(C,"/SearchTitle/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchAvail:function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(C,"/SearchAvailable/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=a(226),P=a(102),B=a(233),N=a(237),D=a(236),W=a(232),I=a(234),T=a(259),A=a(235),E=a(256),U=a(240),q=a(85),F=a.n(q),R=a(84),M=a.n(R),H=a(1);function G(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var J=function(e){var t=e.bid,a=(e.user,e.row,Object(n.useState)([])),r=Object(s.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),d=l[0],b=l[1],h=Object(n.useState)("Loading..."),O=Object(s.a)(h,2),p=O[0],x=(O[1],function(e,t){"clickaway"!==t&&b(!1)});return Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,S.searchTitle(t);case 3:a=e.sent,i(a),b(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),""===c.Summary?Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{children:"No additonal details"}),Object(H.jsx)(g.a,{open:d,onClose:x,children:Object(H.jsx)(G,{onClose:x,severity:"info",children:p})})]}):Object(H.jsxs)("div",{children:[Object(H.jsx)(y.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Summary"}),Object(H.jsxs)("div",{children:[c.Summary,Object(H.jsx)(g.a,{open:d,onClose:x,children:Object(H.jsx)(G,{onClose:x,severity:"info",children:p})})]})]})},K=a(266),V=a(239),Y=a(227),Z=a(238),z=a(230),Q=a(231),_=a(229),X=Object(L.a)((function(e){return{button:{margin:e.spacing(1),justifyContent:"center"},root:{width:"100%"},container:{maxHeight:440}}})),$=[{id:"BranchName",label:"Branch",minWidth:170},{id:"LocationDesc",label:"Section",minWidth:100},{id:"CallNumber",label:"Call number",minWidth:100},{id:"StatusDesc",label:"Status",minWidth:100},{id:"StatusDate",label:"Status Date",minWidth:100},{id:"DueDate",label:"Due Date",minWidth:100}],ee=function(e){var t=e.available,a=e.handleClose,n=e.open,r=X();return Object(H.jsxs)(Y.a,{open:n,onClose:a,fullWidth:!0,maxWidth:"md","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(H.jsx)(_.a,{id:"scroll-dialog-title",children:"Availability"}),Object(H.jsx)(z.a,{children:Object(H.jsx)(Q.a,{id:"scroll-dialog-description",tabIndex:-1,children:Object(H.jsx)(P.a,{className:r.root,children:Object(H.jsx)(W.a,{className:r.container,children:Object(H.jsxs)(B.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(H.jsx)(I.a,{children:Object(H.jsx)(A.a,{children:$.map((function(e){return Object(H.jsx)(D.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(H.jsx)(N.a,{children:t.map((function(e){return Object(H.jsx)(A.a,{hover:!0,role:"checkbox",tabIndex:-1,children:$.map((function(t){var a=e[t.id];return Object(H.jsx)(D.a,{align:t.align,children:t.format&&"number"===typeof a?t.format(a):a},t.id)}))},e.BranchID)}))})]})})})})}),Object(H.jsx)(Z.a,{children:Object(H.jsx)(V.a,{onClick:a,color:"primary",children:"Cancel"})})]})},te=function(e){var t=e.bid,a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),d=l[0],b=l[1];return Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.searchAvail(t);case 2:a=e.sent,i(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(H.jsxs)(E.a,{textAlign:"center",children:[Object(H.jsx)(K.a,{title:"Search availability",children:Object(H.jsx)(h.a,{onClick:function(){b(!0)},children:Object(H.jsx)(x.a,{})})}),Object(H.jsx)(ee,{open:d,handleClose:function(){b(!1)},available:c})]})},ae=a(128),ne=a.n(ae),re="/api/users",ce=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(re);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.name,r=t.password,c={username:a,name:n,password:r},e.next=4,k.a.post(re,c);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.book,n=t.id,r="".concat(re,"/").concat(n),c={type:"ADD",book:a},e.next=5,k.a.put(r,c);case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.bid,n=t.id,r="".concat(re,"/").concat(n),c={type:"DELETE",bid:a},e.next=5,k.a.put(r,c);case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le={getAll:ce,getUser:function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(re,"/").concat(t),e.next=3,k.a.get(a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addBook:se,addUser:ie,deleteBook:oe};function ue(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var je=function(e){var t=e.user,a=e.row,r=Object(n.useState)(!1),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)("Loading..."),d=Object(s.a)(l,2),b=d[0],O=d[1],p=Object(n.useState)("success"),x=Object(s.a)(p,2),m=x[0],f=x[1],v=function(e,t){"clickaway"!==t&&o(!1)},y=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=6;break}f("error"),O("Error: Unable to add book if you are not logged in"),o(!0),e.next=19;break;case 6:return e.prev=6,e.next=9,le.addBook({book:a,id:t.id});case 9:f("success"),O("Book added to readlist"),o(!0),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),O(e.t0.message),f("error"),o(!0);case 19:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();return Object(H.jsxs)(E.a,{textAlign:"center",children:[Object(H.jsx)(K.a,{title:"Add to your readlist",children:Object(H.jsx)(h.a,{"aria-label":"add",onClick:y,children:Object(H.jsx)(ne.a,{})})}),Object(H.jsx)(g.a,{open:i,autoHideDuration:2e3,onClose:v,children:Object(H.jsx)(ue,{onClose:v,severity:m,children:b})})]})},de=[{id:"TitleName",label:"Title",minWidth:170},{id:"Author",label:"Author",minWidth:100},{id:"PublishYear",label:"Publish Year",minWidth:100},{id:"MediaDesc",label:"Media Description",minWidth:100}],be=Object(L.a)({root:{width:"100%"},container:{}}),he=Object(L.a)({root:{"& > *":{borderBottom:"unset"}}});function Oe(e){var t=e.row,a=e.user,n=r.a.useState(!1),c=Object(s.a)(n,2),i=c[0],o=c[1],l=he();return Object(H.jsxs)(r.a.Fragment,{children:[Object(H.jsxs)(A.a,{className:l.root,children:[de.map((function(e){var a=t[e.id];return Object(H.jsx)(D.a,{align:e.align,children:e.format&&"number"===typeof a?e.format(a):a.split("/")[0]},e.id)})),Object(H.jsx)(D.a,{children:Object(H.jsx)(K.a,{title:"Get more details",children:Object(H.jsx)(h.a,{"aria-label":"expand row",size:"small",onClick:function(){return o(!i)},children:i?Object(H.jsx)(M.a,{}):Object(H.jsx)(F.a,{})})})}),Object(H.jsx)(D.a,{children:Object(H.jsx)(je,{row:t,user:a})}),Object(H.jsx)(D.a,{children:Object(H.jsx)(te,{bid:t.BID},t.BID)})]}),Object(H.jsx)(A.a,{children:Object(H.jsx)(D.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(H.jsx)(U.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(H.jsx)(E.a,{margin:1,children:Object(H.jsx)(J,{bid:t.BID,user:a,row:t},t.BID)})})})})]})}function pe(e){var t=e.rows,a=e.user,n=be(),c=r.a.useState(0),i=Object(s.a)(c,2),o=i[0],l=i[1],u=r.a.useState(10),j=Object(s.a)(u,2),d=j[0],b=j[1];return Object(H.jsxs)(P.a,{className:n.root,children:[Object(H.jsx)(W.a,{className:n.container,children:Object(H.jsxs)(B.a,{children:[Object(H.jsx)(I.a,{children:Object(H.jsx)(A.a,{children:de.map((function(e){return Object(H.jsx)(D.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(H.jsx)(N.a,{children:t.slice(o*d,o*d+d).map((function(e){return Object(H.jsx)(Oe,{row:e,user:a},e.BID)}))})]})}),Object(H.jsx)(T.a,{rowsPerPageOptions:[10,25,50],component:"div",count:t.length,rowsPerPage:d,page:o,onChangePage:function(e,t){l(t)},onChangeRowsPerPage:function(e){b(+e.target.value),l(0)}})]})}function xe(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var me=function(e){var t=e.user,a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],i=r[1],l=Object(n.useState)(!1),d=Object(s.a)(l,2),p=d[0],v=d[1],w=Object(b.f)(),k=Object(b.g)().query;Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=8;break}return v(!0),e.next=4,S.searchBook(k);case 4:t=e.sent,console.log("result",t),v(!1),i(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var C=function(e,t){"clickaway"!==t&&v(!1)},L=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.push("/search/".concat(t)),v(!0),e.next=4,S.searchBook(t);case 4:a=e.sent,v(!1),i(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return 0!==c.length?Object(H.jsxs)(o.a,{children:[Object(H.jsx)("div",{children:Object(H.jsx)(m.b,{initialValues:{query:""},onSubmit:function(e){return L(e.query)},children:function(e){return Object(H.jsx)(m.a,{children:Object(H.jsx)(O.a,{fullWidth:!0,variant:"outlined",colour:"primary",placeholder:"Search\u2026",name:"query",InputProps:{endAdornment:Object(H.jsx)(f.a,{position:"start",children:Object(H.jsx)(h.a,{variant:"contained",type:"submit",children:Object(H.jsx)(x.a,{})})})},onChange:e.handleChange,value:e.values.query})})}})}),Object(H.jsx)(pe,{rows:c,user:t}),Object(H.jsx)(g.a,{open:p,onClose:C,children:Object(H.jsx)(xe,{onClose:C,severity:"info",children:"Loading..."})})]}):Object(H.jsxs)(o.a,{maxWidth:"md",children:[Object(H.jsx)("div",{children:Object(H.jsx)(m.b,{initialValues:{query:""},onSubmit:function(e){return L(e.query)},children:function(e){return Object(H.jsx)(m.a,{children:Object(H.jsx)(O.a,{fullWidth:!0,variant:"outlined",colour:"primary",placeholder:"Search\u2026",name:"query",InputProps:{endAdornment:Object(H.jsx)(f.a,{position:"start",children:Object(H.jsx)(h.a,{variant:"contained",type:"submit",children:Object(H.jsx)(x.a,{})})})},onChange:e.handleChange,value:e.values.query})})}})}),Object(H.jsx)(y.a,{variant:"h2",align:"center",color:"textPrimary",children:"No results found"}),Object(H.jsx)(g.a,{open:p,onClose:C,children:Object(H.jsx)(xe,{onClose:C,severity:"info",children:"Loading..."})})]})},fe=a(10),ge=a(28),ve=a(249),ye=a(242),we=a(22),ke=a(99),Ce=a.n(ke),Se=a(4),Le=a(264),Pe=a(245),Be=a(100),Ne=a.n(Be),De=a(101),We=a.n(De),Ie=a(241),Te=a(250),Ae="loggedAppUser",Ee=function(e){return localStorage.setItem(Ae,JSON.stringify(e))},Ue=function(){return JSON.parse(localStorage.getItem(Ae))},qe=function(){return localStorage.removeItem(Ae)},Fe=Object(L.a)((function(e){return{root:{flexGrow:1,color:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"},menuButton:{marginRight:e.spacing(2)},title:Object(fe.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(fe.a)({position:"relative",borderRadius:e.shape.borderRadius,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"},drawer:{width:200,flexShrink:0},drawerHeader:Object(d.a)(Object(d.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),drawerPaper:{width:200},inputInput:Object(fe.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function Re(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var Me=function(e){var t=e.user,a=e.setUser,r=Fe(),c=Object(we.a)(),i=Object(n.useState)(!1),o=Object(s.a)(i,2),l=o[0],u=o[1],j=Object(n.useState)(!1),d=Object(s.a)(j,2),O=d[0],p=d[1],x=Object(b.f)(),m=function(e,t){"clickaway"!==t&&p(!1)},f=function(){u(!0)},v=function(){u(!1)},w=function(){a(null),qe(),x.push("/"),p(!0)};return t?Object(H.jsxs)("div",{className:r.root,children:[Object(H.jsx)(ve.a,{position:"static",style:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"},children:Object(H.jsxs)(ye.a,{children:[Object(H.jsx)(h.a,{color:"inherit","aria-label":"open drawer",onClick:f,edge:"start",className:Object(Se.a)(r.menuButton,l&&r.hide),children:Object(H.jsx)(Ce.a,{})}),Object(H.jsx)(y.a,{className:r.title,variant:"h6",noWrap:!0,children:"Book-Finder"}),Object(H.jsx)("div",{className:r.search,children:Object(H.jsx)(y.a,{onClick:w,children:"Log out"})})]})}),Object(H.jsxs)(Le.a,{className:r.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:r.drawerPaper},children:[Object(H.jsx)("div",{className:r.drawerHeader,children:Object(H.jsx)(h.a,{onClick:v,children:"ltr"===c.direction?Object(H.jsx)(Ne.a,{}):Object(H.jsx)(We.a,{})})}),Object(H.jsxs)(Pe.a,{children:[Object(H.jsx)(ge.b,{to:"/",style:{textDecoration:"none",color:"black"},children:Object(H.jsx)(Ie.a,{button:!0,children:Object(H.jsx)(Te.a,{primary:"Home"})})}),Object(H.jsx)(ge.b,{to:"/users/".concat(t.id),style:{textDecoration:"none",color:"black"},children:Object(H.jsx)(Ie.a,{button:!0,children:Object(H.jsx)(Te.a,{primary:"My booklist"})})}),Object(H.jsx)(Ie.a,{button:!0,onClick:w,children:Object(H.jsx)(Te.a,{primary:"Logout"})})]})]}),Object(H.jsx)(g.a,{open:O,autoHideDuration:3e3,onClose:m,children:Object(H.jsx)(Re,{onClose:m,severity:"success",children:"Logged out"})})]}):Object(H.jsxs)("div",{className:r.root,children:[Object(H.jsx)(ve.a,{position:"static",style:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"},children:Object(H.jsxs)(ye.a,{children:[Object(H.jsx)(h.a,{color:"inherit","aria-label":"open drawer",onClick:f,edge:"start",className:Object(Se.a)(r.menuButton,l&&r.hide),children:Object(H.jsx)(Ce.a,{})}),Object(H.jsx)(y.a,{className:r.title,variant:"h6",noWrap:!0,children:"Book-Finder"}),Object(H.jsx)("div",{className:r.search,children:Object(H.jsx)(ge.b,{to:"/login",style:{textDecoration:"none",color:"white"},children:Object(H.jsx)(y.a,{children:"Login"})})})]})}),Object(H.jsxs)(Le.a,{className:r.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:r.drawerPaper},children:[Object(H.jsx)("div",{className:r.drawerHeader,children:Object(H.jsx)(h.a,{onClick:v,children:"ltr"===c.direction?Object(H.jsx)(Ne.a,{}):Object(H.jsx)(We.a,{})})}),Object(H.jsxs)(Pe.a,{children:[Object(H.jsx)(ge.b,{to:"/",style:{textDecoration:"none",color:"black"},children:Object(H.jsx)(Ie.a,{button:!0,children:Object(H.jsx)(Te.a,{primary:"Home"})})}),Object(H.jsx)(ge.b,{to:"/login",style:{textDecoration:"none",color:"black"},children:Object(H.jsx)(Ie.a,{button:!0,children:Object(H.jsx)(Te.a,{primary:"Login"})})}),Object(H.jsx)(ge.b,{to:"/signup",style:{textDecoration:"none",color:"black"},children:Object(H.jsx)(Ie.a,{button:!0,children:Object(H.jsx)(Te.a,{primary:"Create an account"})})})]})]}),Object(H.jsx)(g.a,{open:O,autoHideDuration:6e3,onClose:m,children:Object(H.jsx)(Re,{onClose:m,severity:"success",children:"Logged out"})})]})},He=a(265),Ge=a(251),Je=a(252),Ke=a(86),Ve=a.n(Ke),Ye={login:function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function Ze(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var ze=Object(L.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Qe=function(e){var t=e.setUser,a=ze(),r=Object(n.useState)(!1),c=Object(s.a)(r,2),i=c[0],l=c[1],d=Object(n.useState)(!1),h=Object(s.a)(d,2),p=h[0],x=h[1],f=Object(b.f)(),v=function(e,t){"clickaway"!==t&&l(!1)},w=function(e,t){"clickaway"!==t&&x(!1)},k=function(){var e=Object(j.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.prev=1,e.next=4,Ye.login({username:a.username,password:a.password});case 4:n=e.sent,t(n),Ee(n),l(!0),f.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.message),x(!0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(H.jsxs)(o.a,{component:"main",maxWidth:"xs",children:[Object(H.jsx)(Ge.a,{}),Object(H.jsxs)("div",{className:a.paper,children:[Object(H.jsx)(He.a,{className:a.avatar,children:Object(H.jsx)(Ve.a,{})}),Object(H.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(H.jsx)(m.b,{initialValues:{username:"",password:""},onSubmit:function(e){return k(e)},children:function(e){return Object(H.jsxs)(m.a,{className:a.form,noValidate:!0,children:[Object(H.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:e.handleChange,value:e.values.username}),Object(H.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.handleChange,value:e.values.password}),Object(H.jsx)(V.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"Sign In"})]})}}),Object(H.jsx)(Je.a,{container:!0,children:Object(H.jsx)(Je.a,{item:!0,children:Object(H.jsx)(ge.b,{to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})}),Object(H.jsx)(g.a,{open:i,autoHideDuration:3e3,onClose:v,children:Object(H.jsx)(Ze,{onClose:v,severity:"success",children:"Logged in"})}),Object(H.jsx)(g.a,{open:p,autoHideDuration:2e3,onClose:w,children:Object(H.jsx)(Ze,{onClose:w,severity:"error",children:"Wrong username/password"})})]})]})},_e=Object(L.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function Xe(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var $e=function(e){var t=e.setUser,a=_e(),r=Object(n.useState)(!1),c=Object(s.a)(r,2),i=c[0],l=c[1],d=Object(n.useState)(!1),h=Object(s.a)(d,2),p=h[0],x=h[1],f=Object(b.f)(),v=function(e,t){"clickaway"!==t&&l(!1)},w=function(e,t){"clickaway"!==t&&x(!1)},k=function(){var e=Object(j.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.prev=1,e.next=4,le.addUser({username:a.username,password:a.password,name:a.name});case 4:return e.next=6,Ye.login({username:a.username,password:a.password});case 6:n=e.sent,t(n),Ee(n),l(!0),f.push("/"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),x(!0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(H.jsxs)(o.a,{component:"main",maxWidth:"xs",children:[Object(H.jsx)(Ge.a,{}),Object(H.jsxs)("div",{className:a.paper,children:[Object(H.jsx)(He.a,{className:a.avatar,children:Object(H.jsx)(Ve.a,{})}),Object(H.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(H.jsx)(m.b,{initialValues:{username:"",password:"",name:""},onSubmit:function(e){return k(e)},children:function(e){return Object(H.jsxs)(m.a,{className:a.form,noValidate:!0,children:[Object(H.jsxs)(Je.a,{container:!0,spacing:2,children:[Object(H.jsx)(Je.a,{item:!0,xs:12,children:Object(H.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",onChange:e.handleChange,value:e.values.name})}),Object(H.jsx)(Je.a,{item:!0,xs:12,children:Object(H.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:e.handleChange,value:e.values.username})}),Object(H.jsx)(Je.a,{item:!0,xs:12,children:Object(H.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.handleChange,value:e.values.password})})]}),Object(H.jsx)(V.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"Sign Up"})]})}}),Object(H.jsx)(Je.a,{container:!0,justify:"flex-start",children:Object(H.jsx)(Je.a,{item:!0,children:Object(H.jsx)(ge.b,{to:"/login",variant:"body2",children:"Already have an account? Sign in"})})}),Object(H.jsx)(g.a,{open:i,autoHideDuration:3e3,onClose:v,children:Object(H.jsx)(Xe,{onClose:v,severity:"success",children:"User created!"})}),Object(H.jsx)(g.a,{open:p,autoHideDuration:3e3,onClose:w,children:Object(H.jsx)(Xe,{onClose:w,severity:"error",children:"Username has been taken. Choose a new one"})})]})]})},et=a(129),tt=a.n(et);function at(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var nt=function(e){var t=e.user,a=e.row,r=Object(n.useState)(!1),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)("Loading..."),d=Object(s.a)(l,2),b=d[0],O=d[1],p=Object(n.useState)("success"),x=Object(s.a)(p,2),m=x[0],f=x[1],v=function(e,t){"clickaway"!==t&&o(!1)},y=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a),!window.confirm("Are you sure you want to delete ".concat(a.TitleName.split("/")[0],"?"))){e.next=16;break}return e.prev=2,e.next=5,le.deleteBook({bid:a.BID,id:t.id});case 5:f("success"),O("Book deleted"),o(!0),window.location.reload(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),O(e.t0.message),f("error"),o(!0);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(H.jsxs)(E.a,{textAlign:"center",children:[Object(H.jsx)(K.a,{title:"Delete from your readlist",children:Object(H.jsx)(h.a,{"aria-label":"delete",onClick:y,children:Object(H.jsx)(tt.a,{})})}),Object(H.jsx)(g.a,{open:i,autoHideDuration:2e3,onClose:v,children:Object(H.jsx)(at,{onClose:v,severity:m,children:b})})]})},rt=[{id:"TitleName",label:"Title",minWidth:170},{id:"Author",label:"Author",minWidth:100},{id:"PublishYear",label:"Publish Year",minWidth:100},{id:"MediaDesc",label:"Media Description",minWidth:100}],ct=Object(L.a)({root:{width:"100%"},container:{}}),it=Object(L.a)({root:{"& > *":{borderBottom:"unset"}}});function st(e){var t=e.row,a=e.user,n=r.a.useState(!1),c=Object(s.a)(n,2),i=c[0],o=c[1],l=it();return Object(H.jsxs)(r.a.Fragment,{children:[Object(H.jsxs)(A.a,{className:l.root,children:[rt.map((function(e){console.log(t[e.id]);var a=t[e.id];return void 0===a&&(a="-"),Object(H.jsx)(D.a,{align:e.align,children:e.format&&"number"===typeof a?e.format(a):a.split("/")[0]},e.id)})),Object(H.jsx)(D.a,{children:Object(H.jsx)(K.a,{title:"Get more details",children:Object(H.jsx)(h.a,{"aria-label":"expand row",size:"small",onClick:function(){return o(!i)},children:i?Object(H.jsx)(M.a,{}):Object(H.jsx)(F.a,{})})})}),Object(H.jsx)(D.a,{children:Object(H.jsx)(nt,{row:t,user:a})}),Object(H.jsx)(D.a,{children:Object(H.jsx)(te,{bid:t.BID})})]}),Object(H.jsx)(A.a,{children:Object(H.jsx)(D.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(H.jsx)(U.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(H.jsx)(E.a,{margin:1,children:Object(H.jsx)(J,{bid:t.BID,user:a,row:t},t.BID)})})})})]})}function ot(e){var t=e.rows,a=e.user,n=ct(),c=r.a.useState(0),i=Object(s.a)(c,2),o=i[0],l=i[1],u=r.a.useState(10),j=Object(s.a)(u,2),d=j[0],b=j[1];return console.log(t),Object(H.jsxs)(P.a,{className:n.root,children:[Object(H.jsx)(W.a,{className:n.container,children:Object(H.jsxs)(B.a,{children:[Object(H.jsx)(I.a,{children:Object(H.jsx)(A.a,{children:rt.map((function(e){return Object(H.jsx)(D.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(H.jsx)(N.a,{children:t.slice(o*d,o*d+d).map((function(e){return Object(H.jsx)(st,{row:e,user:a},e.BID)}))})]})}),Object(H.jsx)(T.a,{rowsPerPageOptions:[10,25,50],component:"div",count:t.length,rowsPerPage:d,page:o,onChangePage:function(e,t){l(t)},onChangeRowsPerPage:function(e){b(+e.target.value),l(0)}})]})}var lt=a(263),ut=a(247),jt=a(257);function dt(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var bt=Object(L.a)((function(e){return{table:{minWidth:650},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),ht=function(e){var t=e.user,a=Object(n.useState)(!1),r=Object(s.a)(a,2),c=r[0],i=r[1],l=Object(n.useState)([]),d=Object(s.a)(l,2),b=d[0],h=d[1],O=Object(n.useState)([]),p=Object(s.a)(O,2),x=p[0],m=p[1],f=Object(n.useState)(""),v=Object(s.a)(f,2),w=v[0],k=v[1],C=bt(),L=function(e,t){"clickaway"!==t&&i(!1)};Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var a,n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,le.getUser(t.id);case 3:a=e.sent,h(a.books),i(!1),n=[],e.t0=u.a.keys(b);case 8:if((e.t1=e.t0()).done){e.next=18;break}return r=e.t1.value,e.next=12,S.searchAvail(r);case 12:c=e.sent,(s=b[r]).available=c.map((function(e){return e.BranchName})),n.push(s),e.next=8;break;case 18:m(n);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.id,w]);var P=""===w?b:x.filter((function(e){return e.available.some((function(e){return e.includes(w)}))}));return Object(H.jsxs)(o.a,{children:[Object(H.jsx)(y.a,{variant:"h3",align:"center",children:"My booklist"}),Object(H.jsxs)(ut.a,{className:C.formControl,children:[Object(H.jsx)(lt.a,{children:"Choose library location"}),Object(H.jsxs)(jt.a,{native:!0,value:w.age,onChange:function(e){k(e.target.value),console.log(w)},children:[Object(H.jsx)("option",{"aria-label":"None",value:""}),Object(H.jsx)("option",{value:"Ang Mo Kio Public Library",children:" Ang Mo Kio Public Library "}),Object(H.jsx)("option",{value:"Bedok Public Library",children:"Bedok Public Library"}),Object(H.jsx)("option",{value:"Bishan Public Library",children:"Bishan Public Library"}),Object(H.jsx)("option",{value:"Bukit Batok Public Library",children:"Bukit Batok Public Library"}),Object(H.jsx)("option",{value:"Bukit Panjang Public Library",children:"Bukit Panjang Public Library"}),Object(H.jsx)("option",{value:"Central Public Library",children:"Central Public Library"}),Object(H.jsx)("option",{value:"Cheng San Public Library",children:"Cheng San Public Library"}),Object(H.jsx)("option",{value:"Choa Chu Kang Public Library",children:"Choa Chu Kang Public Library"}),Object(H.jsx)("option",{value:"Clementi Public Library",children:"Clementi Public Library"}),Object(H.jsx)("option",{value:"Digital Library",children:"Digital Library"}),Object(H.jsx)("option",{value:"Geylang East Public Library",children:"Geylang East Public Library"}),Object(H.jsx)("option",{value:"Jurong Regional Library",children:"Jurong Regional Library"}),Object(H.jsx)("option",{value:"Jurong West Public Library",children:"Jurong West Public Library"}),Object(H.jsx)("option",{value:"library@chinatown",children:"library@chinatown"}),Object(H.jsx)("option",{value:"library@esplanade",children:"library@esplanade"}),Object(H.jsx)("option",{value:"library@harbourfront",children:"library@harbourfront"}),Object(H.jsx)("option",{value:"library@orchard",children:"library@orchard"}),Object(H.jsx)("option",{value:"Marine Parade Public Library",children:"Marine Parade Public Library"}),Object(H.jsx)("option",{value:"Lee Kong Chian",children:"Lee Kong Chian Reference Library"}),Object(H.jsx)("option",{value:"National Library",children:"National Library"}),Object(H.jsx)("option",{value:"Pasir Ris Public Library",children:"Pasir Ris Public Library"}),Object(H.jsx)("option",{value:"Queenstown Public Library",children:"Queenstown Public Library"}),Object(H.jsx)("option",{value:"Sembawang Public Library",children:"Sembawang Public Library"}),Object(H.jsx)("option",{value:"Sengkang Public Library",children:"Sengkang Public Library"}),Object(H.jsx)("option",{value:"Serangoon Public Library",children:"Serangoon Public Library"}),Object(H.jsx)("option",{value:"Tampines Regional Library",children:"Tampines Regional Library"}),Object(H.jsx)("option",{value:"Toa Payoh Public Library",children:"Toa Payoh Public Library"}),Object(H.jsx)("option",{value:"Woodlands Regional Library",children:"Woodlands Regional Library"}),Object(H.jsx)("option",{value:"Yishun Public Library",children:"Yishun Public Library"})]})]}),Object(H.jsx)(ot,{rows:Object.values(P),user:t}),Object(H.jsx)(g.a,{open:c,onClose:L,children:Object(H.jsx)(dt,{onClose:L,severity:"info",children:"Loading..."})})]})},Ot=a(253),pt=a(255),xt=a(254);function mt(e){return Object(H.jsx)(v.a,Object(d.a)({elevation:6,variant:"filled"},e))}var ft=function(e){e.user;var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=(a[0],a[1]),c=Object(n.useState)(!1),i=Object(s.a)(c,2),l=i[0],d=i[1],p=Object(b.f)(),v=function(e,t){"clickaway"!==t&&d(!1)},y=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.push("/search/".concat(t)),d(!0),e.next=4,S.searchBook(t);case 4:a=e.sent,d(!1),r(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(H.jsxs)(o.a,{maxWidth:"md",children:[Object(H.jsx)("div",{children:Object(H.jsx)(m.b,{initialValues:{query:""},onSubmit:function(e){return y(e.query)},children:function(e){return Object(H.jsx)(m.a,{children:Object(H.jsx)(O.a,{fullWidth:!0,variant:"outlined",colour:"primary",placeholder:"Search\u2026",name:"query",InputProps:{endAdornment:Object(H.jsx)(f.a,{position:"start",children:Object(H.jsx)(h.a,{variant:"contained",type:"submit",children:Object(H.jsx)(x.a,{})})})},onChange:e.handleChange,value:e.values.query})})}})}),Object(H.jsx)(g.a,{open:l,onClose:v,children:Object(H.jsx)(mt,{onClose:v,severity:"info",children:"Loading..."})})]})},gt=Object(L.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"140%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)}}}));function vt(){var e=gt();return Object(H.jsxs)(r.a.Fragment,{children:[Object(H.jsx)(Ge.a,{}),Object(H.jsxs)("main",{children:[Object(H.jsxs)("div",{className:e.heroContent,children:[Object(H.jsxs)(o.a,{maxWidth:"sm",children:[Object(H.jsx)(y.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:"NLB Book-Finder"}),Object(H.jsx)(y.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,children:"This website was created so that you do not have to search if a book is available in your library individually."})]}),Object(H.jsx)(ft,{})]}),Object(H.jsx)(o.a,{className:e.cardGrid,maxWidth:"md",children:Object(H.jsxs)(Je.a,{container:!0,spacing:4,children:[Object(H.jsx)(Je.a,{item:!0,xs:12,sm:6,md:4,children:Object(H.jsxs)(Ot.a,{className:e.card,children:[Object(H.jsx)(xt.a,{className:e.cardMedia,image:"https://images-na.ssl-images-amazon.com/images/I/91OUN8YQj+L.jpg",title:"Image title"}),Object(H.jsxs)(pt.a,{className:e.cardContent,children:[Object(H.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Napoleon: A Life"}),Object(H.jsx)(y.a,{children:"Andrew Roberts\u2019s Napoleon is the first one-volume biography to take advantage of the recent publication of Napoleon\u2019s thirty-three thousand letters, which radically transform our understanding of his character and motivation."})]})]})}),Object(H.jsx)(Je.a,{item:!0,xs:12,sm:6,md:4,children:Object(H.jsxs)(Ot.a,{className:e.card,children:[Object(H.jsx)(xt.a,{className:e.cardMedia,image:"https://m.media-amazon.com/images/P/0486415872.01._SCLZZZZZZZ_SX500_.jpg",title:"Image title"}),Object(H.jsxs)(pt.a,{className:e.cardContent,children:[Object(H.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Crime and Punishment"}),Object(H.jsx)(y.a,{children:"One of the supreme masterpieces of world literature, Crime and Punishment catapulted Dostoyevsky to the forefront of Russian writers and into the ranks of the world's greatest novelists. Drawing upon experiences from his own prison days, the author recounts in feverish, compelling tones the story of Raskolnikov, an impoverished student tormented by his own nihilism, and the struggle between good and evil."})]})]})}),Object(H.jsx)(Je.a,{item:!0,xs:12,sm:6,md:4,children:Object(H.jsxs)(Ot.a,{className:e.card,children:[Object(H.jsx)(xt.a,{className:e.cardMedia,image:"https://m.media-amazon.com/images/I/51Lgzw5BD8L.jpg",title:"Image title"}),Object(H.jsxs)(pt.a,{className:e.cardContent,children:[Object(H.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"The Metamorphosis"}),Object(H.jsx)(y.a,{children:"One of Kafka's best-known works, The Metamorphosis tells the story of salesman Gregor Samsa, who wakes one morning to find himself inexplicably transformed into a huge insect and subsequently struggles to adjust to this new condition."})]})]})})]})})]}),Object(H.jsxs)("footer",{className:e.footer,style:{background:"white"},children:[Object(H.jsx)(y.a,{variant:"h6",align:"center",gutterBottom:!0,children:"NLB Book Finder"}),Object(H.jsx)(y.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p",children:"Website built using React and Material Ui"})]})]})}var yt=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=Ue();r(e),console.log(e),console.log("signed in ")}),[]),a?Object(H.jsx)(ge.a,{children:Object(H.jsxs)("div",{style:{background:"white"},children:[Object(H.jsx)(Me,{user:a,setUser:r}),Object(H.jsxs)(b.c,{children:[Object(H.jsx)(b.a,{path:"/login",children:Object(H.jsx)(Qe,{setUser:r})}),Object(H.jsx)(b.a,{path:"/signup",children:Object(H.jsx)($e,{setUser:r})}),Object(H.jsx)(b.a,{path:"/search/:query",children:Object(H.jsx)(me,{user:a})}),Object(H.jsx)(b.a,{path:"/users/:id",children:Object(H.jsx)(ht,{user:a})}),Object(H.jsx)(b.a,{path:"/",children:Object(H.jsx)(me,{user:a})})]})]})}):Object(H.jsx)(ge.a,{children:Object(H.jsxs)("div",{style:{background:"white"},children:[Object(H.jsx)(Me,{user:a,setUser:r}),Object(H.jsx)(o.a,{children:Object(H.jsxs)(b.c,{children:[Object(H.jsx)(b.a,{path:"/login",children:Object(H.jsx)(Qe,{setUser:r})}),Object(H.jsx)(b.a,{path:"/signup",children:Object(H.jsx)($e,{setUser:r})}),Object(H.jsx)(b.a,{path:"/search/:query",children:Object(H.jsx)(me,{})}),Object(H.jsx)(b.a,{path:"/",children:Object(H.jsx)(vt,{})})]})})]})})};i.a.render(Object(H.jsx)(yt,{}),document.getElementById("root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.8ea5740f.chunk.js.map